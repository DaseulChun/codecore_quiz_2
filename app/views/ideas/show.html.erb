<div class="mx-3 my-3">
  <div>
    <% if @review.errors.any? %>
      <ul>
        <% @review.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    <% end %>
    <h1><%= @idea.title %></h1>
    <p><%= @idea.description %></p>
    <p>Posted By <%= @idea.user&.full_name || 'DELETED' %></p>
    <small>Posted <%= time_ago_in_words(@idea.created_at) %> ago</small>
  </div>

  <div class="my-3">
    <% if can?(:crud, @idea) %>
      <%= link_to "Edit", edit_idea_path(@idea), class:"btn btn-outline-primary" %>
      <%= link_to "Delete", idea_path(@idea), method: :delete, data: {confirm: "Are you srue?"}, class:"btn btn-outline-danger" %>
    <% end %>
  </div>

  <div class="form-group">
  <%= form_with(model: [@idea, @review], local: true) do |f| %>
      <h5><label>Review</label></h5>
      <%= f.text_area(
        :body, 
        cols: 50,
        rows: 2,
        placeholder: "What's on your mind?",
        class: "form-control")
      %>
    <%= f.submit "Submit", class:"btn btn-outline-primary my-3"%>
  <% end %>
  </div>

  <div class="review-list">
    <% if @reviews!= nil %>
      <% @reviews.each do |review| %>
        <p>
          <%= review.body %><br />
          <%= review.user&.full_name || 'DELETED' %>
          <small>
            Commented <%= time_ago_in_words (review.created_at) %> ago
          </small>
          
          <% if can?(:crud, review) %>
            ‚óè
            <small>
                <%= link_to(
                    "Delete", 
                    review_path(review), 
                    method: :delete,
                    data: {
                      confirm: "Are you sure?"
                    }
                )
                %>
            </small>
          <% end %>
        </p>
      <% end %>
    <% end %>
  </div>
</div>



